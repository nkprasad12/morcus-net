import { checkPresent } from "@/common/assert";
import { safeParseInt } from "@/common/misc_utils";
import {
  AriaProps,
  type ClickableCoreProps,
} from "@/web/client/components/generic/basics";
import { type PropsWithChildren } from "react";

interface SvgIconProps extends ClickableCoreProps {
  pathD: string;
  fontSize?: "small";
  viewBox?: string;
  opacity?: number;
  offState?: boolean;
}
export function SvgIcon(props: SvgIconProps) {
  const fontSize = props.fontSize === "small" ? "1.25rem" : "1.5rem";
  const className = ["svgIcon"].concat(props.className || []).join(" ");
  const viewBox = props.viewBox || "0 0 24 24";
  const [x, y, dx, dy] = viewBox
    .split(" ")
    .map((n) => checkPresent(safeParseInt(n)));
  return (
    <svg
      className={className}
      viewBox={viewBox}
      focusable="false"
      fontSize={fontSize}
      style={props.style}
      fillOpacity={props.opacity}
      onClick={props.onClick}
      width={24}
      height={24}
      aria-hidden="true"
      aria-label={props["aria-label"]}>
      <path d={props.pathD} />
      {props.offState && (
        <line
          x1={x}
          x2={x + dx}
          y1={y}
          y2={y + dy}
          stroke="currentColor"
          strokeWidth="2"
        />
      )}
    </svg>
  );
}

export namespace SvgIcon {
  export const KeyboardArrowUp =
    "M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z";
  export const KeyboardArrowDown =
    "M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z";
  export const Toc =
    "M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z";
  export const Close =
    "M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z";
  export const Menu = "M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z";
  export const Flag = "M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z";
  export const DarkMode =
    "M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z";
  export const LightMode =
    "M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z";
  export const Build =
    "m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z";
  export const Settings =
    "M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z";
  export const Search =
    "M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z";
  export const Clear =
    "M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z";
  export const Remove = "M19 13H5v-2h14v2z";
  export const Add = "M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z";
  export const Link =
    "M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z";
  export const OpenInNew =
    "M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z";
  export const MenuOpen =
    "M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z";
  export const Edit =
    "M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z";
  export const AutoStories =
    "m19 1-5 5v11l5-4.5V1zM1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6zm22 13.5V6c-.6-.45-1.25-.75-2-1v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5v2c1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5v-1.1z";
  export const MenuBook =
    "M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z";
  export const ArrowBack =
    "M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z";
  export const ArrowForward =
    "m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z";
  export const Info =
    "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z";
  export const OfflineEnabled =
    "M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96M3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4z";
  export const MacronIcon =
    "M24 27.10Q24 28 23.18 29.32Q22.35 30.65 20.95 31.90Q19.55 33.15 17.70 34.02Q15.85 34.90 13.85 34.90Q12.95 34.90 11.95 34.60Q10.95 34.30 10 33.73Q9.05 33.15 8.30 32.33Q7.55 31.50 7.20 30.45Q6.90 30.75 6.47 31.45Q6.05 32.15 5.55 32.88Q5.05 33.60 4.45 34.13Q3.85 34.65 3.20 34.65Q2.55 34.65 2.13 33.98Q1.70 33.30 1.45 32.48Q1.20 31.65 1.10 30.90Q1 30.15 1 30.05Q1 29.45 1.35 27.77Q1.70 26.10 2.40 24.30Q3.10 22.50 4.18 21.10Q5.25 19.70 6.70 19.70Q7.25 19.70 7.43 20.18Q7.60 20.65 7.60 21.10L7.60 22.60Q7.85 22.80 8.13 22.88Q8.40 22.95 8.63 23.07Q8.85 23.20 8.98 23.45Q9.10 23.70 9.10 24.25Q9.10 24.60 9.05 24.88Q9 25.15 9 25.40Q9 26.70 9.20 27.95Q9.40 29.20 10 30.18Q10.60 31.15 11.65 31.77Q12.70 32.40 14.45 32.40Q16.65 32.40 18.18 31.48Q19.70 30.55 20.73 29.42Q21.75 28.30 22.35 27.38Q22.95 26.45 23.35 26.45Q24 26.45 24 27.10M6.45 24.90Q6.45 24.70 6.35 24.52Q6.25 24.35 6.25 24.20Q6.25 24 6.35 23.85Q6.45 23.70 6.45 23.45Q6.45 23.30 6.35 23.23Q6.25 23.15 6.25 23.05Q5.80 23.15 5.33 23.90Q4.85 24.65 4.43 25.65Q4 26.65 3.75 27.67Q3.50 28.70 3.50 29.35Q3.50 29.70 3.70 30.50Q3.90 31.30 4.15 31.55Q5 29.80 5.73 28.15Q6.45 26.50 6.45 24.90M12.75 14.30Q12.70 14.55 11.93 14.77Q11.15 15 9.98 15.20Q8.80 15.40 7.40 15.55Q6 15.70 4.73 15.82Q3.45 15.95 2.50 16Q1.55 16.05 1.25 16.05Q0.60 16.05 0.30 15.67Q0 15.30 0 14.85Q0 14.60 0.20 14Q0.40 13.40 0.80 13.40Q1.05 13.40 1.20 13.60Q1.35 13.80 1.55 13.85Q3.80 13.85 5.98 13.65Q8.15 13.45 10.50 13.45Q10.80 13.45 11.18 13.50Q11.55 13.55 11.88 13.65Q12.20 13.75 12.45 13.90Q12.70 14.05 12.75 14.30Z";
  export const LabelsIcon =
    "M6.08 49.19L2.69 49.19L2.69 18.07L0.27 18.07L0 16.65L3.25 14.33L6.08 14.33L6.08 49.19ZM14.62 49.19L10.30 49.19L10.30 44.82L14.62 44.82L14.62 49.19ZM34.42 49.19L19.04 49.19Q19.02 47.83 18.98 47.05Q18.95 46.26 18.93 45.31Q18.92 44.36 18.97 42.55Q19.02 39.70 19.90 37.77Q20.78 35.84 22.18 34.52Q23.58 33.20 25.20 32.20L27.73 30.71Q29.74 29.64 30.29 28.43Q30.83 27.22 30.96 25.95Q31.18 22.85 30.96 19.78Q30.86 18.41 29.85 17.75Q28.83 17.09 26.49 17.09Q24.27 17.09 23.30 17.75Q22.34 18.41 22.27 19.78Q22.22 21.48 22.23 23.19Q22.24 24.90 22.36 26.64L18.97 26.64Q18.90 24.98 18.85 23.30Q18.80 21.63 18.87 20.36Q19.04 16.94 20.83 15.48Q22.61 14.01 26.56 14.01Q30.71 14.01 32.46 15.48Q34.20 16.94 34.38 20.36Q34.47 21.56 34.47 23.18Q34.47 24.80 34.38 25.93Q34.13 29.00 32.80 30.82Q31.47 32.64 28.76 34.16L26.12 35.72Q24.27 36.69 23.35 38.59Q22.44 40.48 22.44 42.55L22.44 45.90L34.42 45.90L34.42 49.19Z";
}

interface IconButtonProps extends ClickableCoreProps {
  size?: "small" | "medium";
  disabled?: boolean;
}
export function IconButton(props: PropsWithChildren<IconButtonProps>) {
  const className = ["iconButton"]
    .concat(props.className || [])
    .concat(props.size || [])
    .join(" ");
  return (
    <button
      disabled={props.disabled}
      className={className}
      onClick={props.onClick}
      style={props.style}
      {...AriaProps.extract(props)}>
      {props.children}
    </button>
  );
}
